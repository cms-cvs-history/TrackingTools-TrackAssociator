# -*-SH-*-
process TEST = {
    untracked PSet maxEvents = {untracked int32 input = 100}

   untracked PSet options =
   {
       untracked vstring Rethrow = {"ProductNotFound"}
   }

  service = MessageLogger {
          untracked vstring destinations = {"cout"}
	  untracked vstring categories   = {"TrackAssociator"}
	  untracked PSet cout = {
		        # untracked string threshold = "INFO"
		        untracked string threshold = "DEBUG"
			# untracked PSet default = { untracked int32 limit = -1  }
			untracked PSet DEBUG = { untracked int32 limit = 0  }
			untracked PSet INFO = { untracked int32 limit = -1  }
			untracked PSet TrackAssociator = { untracked int32 limit = -1  }
		      }
           untracked vstring debugModules = { "test" }
  }
  
  source = PoolSource {
     untracked vstring fileNames = {
     "file:/uscmst1b_scratch/lpc1/cms1/dmytro/tmp/cmsdata/20X/RelVal-RelValZMM-1209251027-STARTUP_V2-3rd__0000__164B91A4-1F1A-DD11-8857-001D09F2527B.root"
     # "/store/data/2008/5/20/T0ReReco-GlobalCruzet1-A-v1/0004/022CEA5D-D426-DD11-A10B-000423D99AA2.root"
     }
     # untracked uint32 skipEvents = 409
  }

# include geometry and magnetic field
include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
include "Geometry/CaloEventSetup/data/CaloTopology.cfi"

include "Geometry/DTGeometry/data/dtGeometry.cfi"
include "Geometry/RPCGeometry/data/rpcGeometry.cfi"
include "Geometry/CSCGeometry/data/cscGeometry.cfi"
include "Geometry/CommonDetUnit/data/bareGlobalTrackingGeometry.cfi"
include "Geometry/MuonNumbering/data/muonNumberingInitialization.cfi"

# add the SteppingHelixPropagator to the EventSetup
include "TrackPropagation/SteppingHelixPropagator/data/SteppingHelixPropagatorAny.cfi"
include "TrackPropagation/SteppingHelixPropagator/data/SteppingHelixPropagatorAlong.cfi"
include "TrackPropagation/SteppingHelixPropagator/data/SteppingHelixPropagatorOpposite.cfi"

include "TrackingTools/TrackAssociator/data/DetIdAssociatorESProducer.cff"

    module test = TestTrackAssociator {
      include "TrackingTools/TrackAssociator/data/default.cfi"
    }
   
   #replace test.TrackAssociatorParameters.useCalo = true

  module selectMuons1 = MuonSelector {
    InputTag src = muons
    string cut = "abs(standAloneMuon.d0) < 50"
    bool filter = true
  }
  
  module selectMuons2 = MuonSelector {
    InputTag src = muons
    string cut = "abs(standAloneMuon.eta) > 1.5"
    bool filter = true
  }
    
   path p = {selectMuons1, selectMuons2, test}
}

