# -*-SH-*-
process TEST = {

   untracked PSet options =
   {
       untracked vstring Rethrow = {"ProductNotFound"}
   }

  service = MessageLogger {
          untracked vstring destinations = {"cout"}
    untracked PSet cout = {
           untracked string threshold = "INFO"
            #untracked string threshold = "DEBUG"
      untracked PSet default = { untracked int32 limit = -1  }
          }
           untracked vstring debugModules = { "trackAssoc" }
  }
  
  source = PoolSource {
     untracked vstring fileNames = {
       "file:/data/jribnik/mc090/reco_muons1000_1010.root"
     }
     untracked int32 maxEvents = 1000
     # untracked uint32 skipEvents = 250
  }
    
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    
#   include "Geometry/CMSCommonData/data/cmsSimIdealGeometryXML.cfi"
   include "Geometry/CaloEventSetup/data/CaloGeometry.cfi"
   include "Geometry/CaloEventSetup/data/CaloTopology.cfi"

#   include "Geometry/MuonCommonData/data/muonIdealGeometryXML.cfi"
   include "Geometry/DTGeometry/data/dtGeometry.cfi"
   include "Geometry/RPCGeometry/data/rpcGeometry.cfi"
   include "Geometry/CSCGeometry/data/cscGeometry.cfi"
   
   # es_module = TrackerGeometricDetESModule {}

    module trackAssoc = TestTrackAssociatorProducer {
      bool useSimTrack = true

      #string recoTrackCollectionName = "ctfAnalyticalTracks"
      #string recoTrackCollectionName = "ctfWithMaterialTracks"
      #string recoTrackCollectionName = "rsAnalyticalTracks"
      string recoTrackCollectionName = "rsWithMaterialTracks"

      vstring labels = {
      "EBRecHitCollection, ecalRecHit, EcalRecHitsEB",
      "CaloTowerCollection, towerMaker",
      "DTRecSegment4DCollection, dt4DSegments",
      "CSCSegmentCollection, cscSegments"
      }
      bool useEcal = true
      bool useHcal = true
      bool useMuon = true
    }

    module Out = PoolOutputModule {
      untracked string fileName = "file:/data/jribnik/mc090/latest/associated_muons1000_1010_simrecotracks.root"
    }
   
    path p = {trackAssoc}
    endpath e = {Out}
}

